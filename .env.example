# GOTRS Environment Configuration Example
# Copy this file to .env and update with your values
#
# SECURITY WARNING: 
# - NEVER commit .env files to version control
# - ALWAYS change all default passwords before deployment
# - Use strong, unique passwords for production
# - Store production secrets in a secure vault (e.g., HashiCorp Vault, AWS Secrets Manager)

# ============================================
# Application
# ============================================

APP_ENV=development
APP_PORT=8080
APP_URL=http://localhost:8080

# Hint: `openssl rand -base64 32` to generate a secure key
JWT_SECRET=CHANGE_THIS_SECRET_KEY_BEFORE_USE
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# ============================================
# Password Hashing
# ============================================

PASSWORD_HASH_TYPE=sha256
MIGRATE_PASSWORD_HASHES=false

# ============================================
# Database
# ============================================

DB_DRIVER=mariadb
DB_HOST=mariadb
DB_PORT=3306
DB_NAME=otrs
DB_USER=otrs
DB_PASSWORD=ChangeThisPassword123!
DB_SSL_MODE=disable
MYSQL_ROOT_PASSWORD=ChangeThisRootPassword123!

DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10
DB_CONNECTION_MAX_LIFETIME=30m

# Database URL (alternative to individual settings)
# DATABASE_URL=mysql://otrs:ChangeThisPassword123!@mariadb:3306/otrs?parseTime=true&tls=false

# ============================================
# Test Databases & Cache
# ============================================

TEST_DB_DRIVER=mysql
TEST_DB_NAME=gotrs_test
TEST_DB_USER=gotrs_user
TEST_DB_PASSWORD=gotrs_password

# Postgres test database (toolbox targets)
TEST_DB_POSTGRES_HOST=postgres-test
TEST_DB_POSTGRES_PORT=5433
TEST_DB_POSTGRES_NAME=gotrs_test
TEST_DB_POSTGRES_USER=gotrs_user
TEST_DB_POSTGRES_PASSWORD=gotrs_password

# MariaDB test database (compose test profile)
TEST_DB_MYSQL_HOST=mariadb-test
TEST_DB_MYSQL_PORT=3308
TEST_DB_MYSQL_NAME=otrs_test
TEST_DB_MYSQL_USER=otrs
TEST_DB_MYSQL_PASSWORD=ChangeThisPassword123!
TEST_DB_ROOT_PASSWORD=ChangeThisRootPassword123!

# Test cache settings
TEST_DB_REDIS_HOST=valkey-test
TEST_REDIS_PASSWORD=valkey-test-password

# ============================================
# Valkey Cache
# ============================================

VALKEY_HOST=valkey
VALKEY_PORT=6379
VALKEY_PASSWORD=
VALKEY_DB=0

# Valkey URL (alternative to individual settings)
# VALKEY_URL=valkey://valkey:6379/0

VALKEY_TEST_HOST=valkey-test
VALKEY_TEST_PORT=6379

# ============================================
# Email Configuration
# ============================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@gotrs.io
SMTP_FROM_NAME=GOTRS Support
SMTP_TLS=true
SMTP_SKIP_VERIFY=true
EMAIL_FROM=noreply@gotrs.io
EMAIL_ENABLED=true

IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USER=your-email@gmail.com
IMAP_PASSWORD=your-app-password
IMAP_SSL=true
IMAP_FOLDER=INBOX

EMAIL_FETCH_INTERVAL=5m
EMAIL_MAX_SIZE=10MB

# ============================================
# Storage
# ============================================

STORAGE_BACKEND=local
STORAGE_LOCAL_PATH=./storage
STORAGE_PATH=/app/storage

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET=gotrs-attachments
S3_ENDPOINT=

MAX_UPLOAD_SIZE=10MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,png,jpg,jpeg,gif,zip

# ============================================
# Security
# ============================================

CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

SESSION_SECRET=your-session-secret-here
SESSION_MAX_AGE=86400
SESSION_SECURE=false
SESSION_HTTP_ONLY=true

# ============================================
# Logging
# ============================================

LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=./logs/gotrs.log

# ============================================
# Monitoring
# ============================================

METRICS_ENABLED=true
METRICS_PORT=9090
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=gotrs

# ============================================
# Demo Mode
# ============================================

DEMO_MODE=false
DEMO_RESET_SCHEDULE="0 2 * * *"
DEMO_DATA_FILE=./demo-data/sample.json

DEMO_ADMIN_EMAIL=demo-admin@example.com
DEMO_ADMIN_PASSWORD=ChangeThisPassword123!
DEMO_AGENT_EMAIL=demo-agent@example.com
DEMO_AGENT_PASSWORD=ChangeThisPassword456!
DEMO_CUSTOMER_EMAIL=demo-customer@example.com
DEMO_CUSTOMER_PASSWORD=ChangeThisPassword789!

# ============================================
# Feature Flags
# ============================================

FEATURE_AI_SUGGESTIONS=false
FEATURE_ADVANCED_WORKFLOWS=false
FEATURE_MULTI_LANGUAGE=false
FEATURE_WEBHOOKS=true
FEATURE_API_V2=false

# ============================================
# Search Engine (Zinc)
# ============================================

ZINC_USER=zinc_admin
ZINC_PASSWORD=ChangeThisZincPassword123!

# ============================================
# LDAP/Active Directory Integration
# ============================================

LDAP_HOST=openldap
LDAP_PORT=389
LDAP_BASE_DN=dc=gotrs,dc=local
LDAP_BIND_DN=cn=readonly,dc=gotrs,dc=local
LDAP_BIND_PASSWORD=readonly123

LDAP_USER_SEARCH_BASE=ou=Users,dc=gotrs,dc=local
LDAP_USER_FILTER=(&(objectClass=inetOrgPerson)(uid={username}))
LDAP_GROUP_SEARCH_BASE=ou=Groups,dc=gotrs,dc=local
LDAP_GROUP_FILTER=(objectClass=groupOfNames)

LDAP_ATTR_USERNAME=uid
LDAP_ATTR_EMAIL=mail
LDAP_ATTR_FIRST_NAME=givenName
LDAP_ATTR_LAST_NAME=sn
LDAP_ATTR_DISPLAY_NAME=displayName
LDAP_ATTR_PHONE=telephoneNumber
LDAP_ATTR_DEPARTMENT=departmentNumber
LDAP_ATTR_TITLE=title
LDAP_ATTR_MANAGER=manager
LDAP_ATTR_GROUPS=memberOf

LDAP_USE_TLS=false
LDAP_START_TLS=false
LDAP_INSECURE_SKIP_VERIFY=true

LDAP_AUTO_CREATE_USERS=true
LDAP_AUTO_UPDATE_USERS=true
LDAP_AUTO_CREATE_GROUPS=true
LDAP_SYNC_INTERVAL=1h

LDAP_ADMIN_GROUPS=Domain Admins,IT Team
LDAP_AGENT_GROUPS=Agents,Support Team,Managers
LDAP_USER_GROUPS=Users

LDAP_ADMIN_PASSWORD=admin123
LDAP_CONFIG_PASSWORD=config123
LDAP_READONLY_PASSWORD=readonly123

# ============================================
# External Services
# ============================================

OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo

SLACK_APP_TOKEN=
SLACK_BOT_TOKEN=
SLACK_SIGNING_SECRET=

GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
GITHUB_WEBHOOK_SECRET=

# ============================================
# Development
# ============================================

DEV_HOT_RELOAD=true
DEV_VERBOSE_ERRORS=true
DEV_SQL_DEBUG=false

VITE_API_URL=http://localhost:8080/api
VITE_WS_URL=ws://localhost:8080/ws

# ============================================
# Admin Credentials
# ============================================

ADMIN_USER=root@localhost
ADMIN_PASSWORD=ChangeThisPassword123!

TEST_PG_ADMIN_USER=root@localhost
TEST_PG_ADMIN_PASSWORD=ChangeThisPassword123!
TEST_MYSQL_ADMIN_USER=root@localhost
TEST_MYSQL_ADMIN_PASSWORD=ChangeThisPassword123!

# ============================================
# Testing Controls
# ============================================

GOTRS_DISABLE_TEST_AUTH_BYPASS=1
TEST_BACKEND_PORT=18081
BACKEND_TEST_PORT=8082

# ============================================
# Container Ports & IDs
# ============================================

HOST_UID=1000
HOST_GID=1000
BACKEND_PORT=8081
VALKEY_TEST_PORT=6389
SMTP4DEV_SMTP_PORT=1025
SMTP4DEV_IMAP_PORT=1143
SMTP4DEV_POP3_PORT=1110
SMTP4DEV_UI_PORT=8025
ADMINER_PORT=8090

# ============================================
# API Testing
# ============================================

TEST_USERNAME=root@localhost
TEST_PASSWORD=admin123
BACKEND_URL=https://gotrs-backend:8080
