{% extends "layouts/base.pongo2" %}

{% block title %}{{ t("pages.agent.queues.title")|default:"Queue Management" }} - GOTRS{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 min-h-screen">
    <!-- Header -->
    <div class="mb-6">
        <h1 class="text-3xl font-bold gk-heading"><span class="gk-text-gradient">{{ t("pages.agent.queues.title")|default:"Queue Management" }}</span></h1>
        <p class="mt-2 text-sm" style="color: var(--gk-text-secondary);">
            {{ t("pages.agent.queues.description")|default:"View and manage ticket queues assigned to you" }}
        </p>
    </div>

    <!-- Queues list -->
    <div class="gk-card-glow rounded-lg overflow-hidden">
        <div class="px-4 py-5 sm:p-6">
            {% if Queues and Queues|length > 0 %}
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
                {% for queue in Queues %}
                <div class="relative rounded-lg border px-6 py-5 flex items-center space-x-3 transition-colors hover:bg-white/5"
                     style="border-color: var(--gk-border); background: var(--gk-bg-surface);">
                    <div class="flex-shrink-0">
                        <div class="h-10 w-10 rounded-lg flex items-center justify-center" style="background: rgba(var(--gk-primary-rgb), 0.2);">
                            <svg class="h-6 w-6" style="color: var(--gk-primary);" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                            </svg>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <a href="/agent/tickets?queue={{ queue.ID }}" class="focus:outline-none">
                            <span class="absolute inset-0" aria-hidden="true"></span>
                            <p class="text-sm font-medium" style="color: var(--gk-text-primary);">
                                {{ queue.Name }}
                            </p>
                            <p class="text-sm truncate" style="color: var(--gk-text-muted);">
                                {% if queue.Comments %}
                                    {{ queue.Comments }}
                                {% else %}
                                    No description
                                {% endif %}
                            </p>
                            <div class="flex items-center space-x-4 mt-2">
                                <div class="flex items-center text-xs">
                                    <span class="gk-badge gk-badge-accent">
                                        {{ queue.OpenTicketCount }} open
                                    </span>
                                </div>
                                <div class="text-xs" style="color: var(--gk-text-muted);">
                                    {{ queue.TicketCount }} total
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-12">
                <svg class="mx-auto h-12 w-12" style="color: var(--gk-text-muted);" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                </svg>
                <h3 class="mt-2 text-sm font-medium" style="color: var(--gk-text-primary);">{{ t("queues.no_queues_available")|default:"No queues available" }}</h3>
                <p class="mt-1 text-sm" style="color: var(--gk-text-muted);">
                    You don't have access to any ticket queues, or no queues are configured in the system.
                </p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
