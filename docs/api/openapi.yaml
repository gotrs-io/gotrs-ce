openapi: 3.0.3
info:
  title: GOTRS API
  description: |
    GOTRS (GO Ticket Request System) is a modern, cloud-native ticketing system built with Go and HTMX.

    This API provides comprehensive ticket management, user authentication, queue management, and enterprise integrations including LDAP/Active Directory.

    ## Features
    - üé´ Complete ticket lifecycle management
    - üë• User and role management with RBAC
    - üè¢ Enterprise LDAP/Active Directory integration
    - üìä Real-time dashboards and analytics
    - üîî Multi-channel notifications (Slack, Teams, Email)
    - üîÑ Workflow automation and templates
    - üîç Advanced search and filtering
    - üìà SLA management and escalation
    - üîê OAuth2 and API token authentication

    ## Authentication
    The API supports multiple authentication methods:
    - Session-based authentication for web UI
    - JWT tokens for API access
    - OAuth2 for third-party integrations
    - LDAP/Active Directory for enterprise SSO

  version: 1.0.0
  contact:
    name: GOTRS Support
    url: https://github.com/gotrs-io/gotrs-ce
    email: support@gotrs.io
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8080
    description: Development server
  - url: https://api.gotrs.io
    description: Production server

security:
  - sessionAuth: []
  - jwtAuth: []
  - oauth2: []

paths:
  # Authentication Endpoints
  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: User login
      description: Authenticate user with username/email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  description: Username or email address
                  example: "john.doe@company.com"
                password:
                  type: string
                  format: password
                  description: User password
                  example: "securePassword123"
                remember_me:
                  type: boolean
                  description: Keep user logged in
                  default: false
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too many login attempts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/logout:
    post:
      tags:
        - Authentication
      summary: User logout
      description: End user session and invalidate tokens
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # Dashboard Endpoints
  /api/dashboard/stats:
    get:
      tags:
        - Dashboard
      summary: Get dashboard statistics
      description: Retrieve key metrics and statistics for the dashboard
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: Dashboard statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/DashboardStats'

  /api/dashboard/recent-tickets:
    get:
      tags:
        - Dashboard
      summary: Get recent tickets
      description: Retrieve recently created or updated tickets
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: limit
          in: query
          description: Maximum number of tickets to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: Recent tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Ticket'

  # Queue Management Endpoints
  /api/queues:
    get:
      tags:
        - Queues
      summary: List all queues
      description: Retrieve a list of all ticket queues
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: search
          in: query
          description: Search term for queue name or description
          schema:
            type: string
      responses:
        '200':
          description: List of queues
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Queue'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      tags:
        - Queues
      summary: Create a new queue
      description: Create a new ticket queue
      security:
        - sessionAuth: []
        - jwtAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueueCreate'
      responses:
        '201':
          description: Queue created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Queue'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/queues/{id}:
    get:
      tags:
        - Queues
      summary: Get queue details
      description: Retrieve detailed information about a specific queue
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Queue ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Queue details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Queue'
        '404':
          description: Queue not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/queues/{id}/tickets:
    get:
      tags:
        - Queues
      summary: Get tickets in queue
      description: Retrieve all tickets in a specific queue
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Queue ID
          schema:
            type: integer
            format: int64
        - name: status
          in: query
          description: Filter by ticket status
          schema:
            type: string
            enum: [open, in_progress, pending, resolved, closed]
        - name: priority
          in: query
          description: Filter by priority
          schema:
            type: string
            enum: [low, normal, high, urgent]
        - name: assigned_to
          in: query
          description: Filter by assigned agent ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Tickets in queue
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Ticket'

  # LDAP Integration Endpoints
  /api/v1/ldap/configure:
    post:
      tags:
        - LDAP Integration
      summary: Configure LDAP integration
      description: Set up LDAP/Active Directory connection and authentication settings
      security:
        - sessionAuth: []
        - jwtAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LDAPConfig'
      responses:
        '200':
          description: LDAP configuration successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "LDAP configuration successful"
        '400':
          description: Invalid configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/ldap/test:
    post:
      tags:
        - LDAP Integration
      summary: Test LDAP connection
      description: Test connectivity and authentication with LDAP server
      security:
        - sessionAuth: []
        - jwtAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LDAPConnectionTest'
      responses:
        '200':
          description: Connection test successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "LDAP connection successful"
        '422':
          description: Connection test failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/ldap/authenticate:
    post:
      tags:
        - LDAP Integration
      summary: Authenticate user via LDAP
      description: Authenticate a user against the configured LDAP server
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  description: LDAP username
                  example: "jdoe"
                password:
                  type: string
                  format: password
                  description: User password
      responses:
        '200':
          description: Authentication successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPUser'
                  message:
                    type: string
                    example: "Authentication successful"
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/ldap/users/{username}:
    get:
      tags:
        - LDAP Integration
      summary: Get LDAP user information
      description: Retrieve user information from LDAP directory
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: username
          in: path
          required: true
          description: LDAP username
          schema:
            type: string
      responses:
        '200':
          description: User information retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPUser'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/ldap/groups:
    get:
      tags:
        - LDAP Integration
      summary: Get LDAP groups
      description: Retrieve all groups from LDAP directory
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: Groups retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/LDAPGroup'
                  count:
                    type: integer
                    description: Total number of groups

  /api/v1/ldap/sync/users:
    post:
      tags:
        - LDAP Integration
      summary: Synchronize users from LDAP
      description: Perform a full synchronization of users from LDAP directory
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: Synchronization completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPSyncResult'
                  message:
                    type: string
                    example: "User synchronization completed"

  /api/v1/ldap/import/users:
    post:
      tags:
        - LDAP Integration
      summary: Import specific users from LDAP
      description: Import a list of specific users from LDAP directory
      security:
        - sessionAuth: []
        - jwtAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - usernames
              properties:
                usernames:
                  type: array
                  items:
                    type: string
                  description: List of usernames to import
                  example: ["jdoe", "asmith", "mwilson"]
                dry_run:
                  type: boolean
                  description: Perform a dry run without making changes
                  default: false
      responses:
        '200':
          description: Import completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPSyncResult'
                  message:
                    type: string
                    example: "User import completed"

  /api/v1/ldap/config:
    get:
      tags:
        - LDAP Integration
      summary: Get LDAP configuration
      description: Retrieve current LDAP configuration (sensitive data excluded)
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: LDAP configuration
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPConfigResponse'
        '404':
          description: LDAP not configured
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/ldap/sync/status:
    get:
      tags:
        - LDAP Integration
      summary: Get LDAP synchronization status
      description: Retrieve the current status of LDAP synchronization
      security:
        - sessionAuth: []
        - jwtAuth: []
      responses:
        '200':
          description: Synchronization status
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/LDAPSyncStatus'

  /api/v1/ldap/logs/auth:
    get:
      tags:
        - LDAP Integration
      summary: Get LDAP authentication logs
      description: Retrieve recent LDAP authentication attempts
      security:
        - sessionAuth: []
        - jwtAuth: []
      parameters:
        - name: limit
          in: query
          description: Maximum number of log entries to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 50
      responses:
        '200':
          description: Authentication logs
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/LDAPAuthLog'
                  count:
                    type: integer
                    description: Number of log entries returned

components:
  securitySchemes:
    sessionAuth:
      type: apiKey
      in: cookie
      name: gotrs_session
      description: Session-based authentication using cookies

    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token authentication

    oauth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: /oauth2/authorize
          tokenUrl: /oauth2/token
          scopes:
            read: Read access to tickets and user data
            write: Write access to create and modify tickets
            admin: Administrative access to system configuration

  schemas:
    # Core Data Models
    Ticket:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: Unique ticket identifier
          example: 12345
        ticket_number:
          type: string
          description: Human-readable ticket number
          example: "TKT-2025-001234"
        title:
          type: string
          description: Ticket title/subject
          example: "Unable to access customer portal"
        description:
          type: string
          description: Detailed ticket description
          example: "Customer reports receiving 'Access Denied' error when trying to log into the customer portal."
        status:
          type: string
          enum: [open, in_progress, pending, resolved, closed]
          description: Current ticket status
          example: "open"
        priority:
          type: string
          enum: [low, normal, high, urgent]
          description: Ticket priority level
          example: "high"
        queue_id:
          type: integer
          format: int64
          description: ID of the queue this ticket belongs to
          example: 5
        customer_id:
          type: integer
          format: int64
          description: ID of the customer who created the ticket
          example: 1001
        assigned_to:
          type: integer
          format: int64
          nullable: true
          description: ID of the agent assigned to this ticket
          example: 42
        created_at:
          type: string
          format: date-time
          description: Ticket creation timestamp
          example: "2025-08-17T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: "2025-08-17T14:45:00Z"
        due_date:
          type: string
          format: date-time
          nullable: true
          description: SLA due date
          example: "2025-08-18T10:30:00Z"
        tags:
          type: array
          items:
            type: string
          description: Tags associated with the ticket
          example: ["portal", "authentication", "urgent"]
        custom_fields:
          type: object
          additionalProperties: true
          description: Custom field values
          example:
            department: "IT"
            impact: "high"
            urgency: "medium"

    Queue:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: Unique queue identifier
          example: 5
        name:
          type: string
          description: Queue name
          example: "Technical Support"
        description:
          type: string
          description: Queue description
          example: "Technical support requests and troubleshooting"
        email:
          type: string
          format: email
          description: Email address for this queue
          example: "support@company.com"
        is_active:
          type: boolean
          description: Whether the queue is active
          example: true
        default_priority:
          type: string
          enum: [low, normal, high, urgent]
          description: Default priority for new tickets
          example: "normal"
        auto_assign:
          type: boolean
          description: Whether to auto-assign tickets
          example: true
        sla_id:
          type: integer
          format: int64
          nullable: true
          description: Default SLA for this queue
          example: 1
        created_at:
          type: string
          format: date-time
          example: "2025-08-17T09:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2025-08-17T09:00:00Z"

    QueueCreate:
      type: object
      required:
        - name
        - email
      properties:
        name:
          type: string
          description: Queue name
          example: "Technical Support"
        description:
          type: string
          description: Queue description
          example: "Technical support requests and troubleshooting"
        email:
          type: string
          format: email
          description: Email address for this queue
          example: "support@company.com"
        default_priority:
          type: string
          enum: [low, normal, high, urgent]
          description: Default priority for new tickets
          default: "normal"
        auto_assign:
          type: boolean
          description: Whether to auto-assign tickets
          default: true
        sla_id:
          type: integer
          format: int64
          nullable: true
          description: Default SLA for this queue

    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: Unique user identifier
          example: 42
        login:
          type: string
          description: Username/login
          example: "john.doe"
        email:
          type: string
          format: email
          description: Email address
          example: "john.doe@company.com"
        first_name:
          type: string
          description: First name
          example: "John"
        last_name:
          type: string
          description: Last name
          example: "Doe"
        title:
          type: string
          description: Job title
          example: "Senior Developer"
        role:
          type: string
          description: User role
          example: "Agent"
        is_active:
          type: boolean
          description: Whether the user is active
          example: true
        last_login:
          type: string
          format: date-time
          nullable: true
          description: Last login timestamp
          example: "2025-08-17T08:30:00Z"
        created_at:
          type: string
          format: date-time
          example: "2025-08-17T08:00:00Z"

    DashboardStats:
      type: object
      properties:
        total_tickets:
          type: integer
          description: Total number of tickets
          example: 1247
        open_tickets:
          type: integer
          description: Number of open tickets
          example: 89
        assigned_tickets:
          type: integer
          description: Number of tickets assigned to current user
          example: 12
        overdue_tickets:
          type: integer
          description: Number of overdue tickets
          example: 5
        tickets_created_today:
          type: integer
          description: Tickets created today
          example: 23
        tickets_resolved_today:
          type: integer
          description: Tickets resolved today
          example: 18
        average_response_time:
          type: string
          description: Average response time
          example: "2h 15m"
        average_resolution_time:
          type: string
          description: Average resolution time
          example: "1d 4h"

    # LDAP Integration Models
    LDAPConfig:
      type: object
      required:
        - host
        - base_dn
        - bind_dn
        - bind_password
      properties:
        host:
          type: string
          description: LDAP server hostname or IP
          example: "ldap.company.com"
        port:
          type: integer
          description: LDAP server port
          default: 389
          example: 389
        base_dn:
          type: string
          description: Base Distinguished Name
          example: "dc=company,dc=com"
        bind_dn:
          type: string
          description: Bind Distinguished Name
          example: "cn=gotrs-service,ou=Service Accounts,dc=company,dc=com"
        bind_password:
          type: string
          format: password
          description: Bind password
        user_search_base:
          type: string
          description: User search base DN
          example: "ou=Users,dc=company,dc=com"
        user_filter:
          type: string
          description: User search filter
          example: "(&(objectClass=inetOrgPerson)(uid={username}))"
        group_search_base:
          type: string
          description: Group search base DN
          example: "ou=Groups,dc=company,dc=com"
        group_filter:
          type: string
          description: Group search filter
          example: "(objectClass=groupOfNames)"
        use_tls:
          type: boolean
          description: Use TLS encryption
          default: false
        start_tls:
          type: boolean
          description: Use StartTLS
          default: false
        insecure_skip_verify:
          type: boolean
          description: Skip TLS certificate verification
          default: false
        auto_create_users:
          type: boolean
          description: Automatically create users from LDAP
          default: true
        auto_update_users:
          type: boolean
          description: Automatically update user information
          default: true
        auto_create_groups:
          type: boolean
          description: Automatically create groups from LDAP
          default: true
        sync_interval:
          type: string
          description: Synchronization interval
          example: "1h"
        default_role:
          type: string
          description: Default role for new users
          example: "user"
        admin_groups:
          type: array
          items:
            type: string
          description: LDAP groups that map to admin role
          example: ["Domain Admins", "IT Team"]
        user_groups:
          type: array
          items:
            type: string
          description: LDAP groups that map to user role
          example: ["Users"]
        attribute_map:
          $ref: '#/components/schemas/LDAPAttributeMap'

    LDAPAttributeMap:
      type: object
      properties:
        username:
          type: string
          description: LDAP attribute for username
          example: "uid"
        email:
          type: string
          description: LDAP attribute for email
          example: "mail"
        first_name:
          type: string
          description: LDAP attribute for first name
          example: "givenName"
        last_name:
          type: string
          description: LDAP attribute for last name
          example: "sn"
        display_name:
          type: string
          description: LDAP attribute for display name
          example: "displayName"
        phone:
          type: string
          description: LDAP attribute for phone number
          example: "telephoneNumber"
        department:
          type: string
          description: LDAP attribute for department
          example: "departmentNumber"
        title:
          type: string
          description: LDAP attribute for job title
          example: "title"
        manager:
          type: string
          description: LDAP attribute for manager
          example: "manager"
        groups:
          type: string
          description: LDAP attribute for group membership
          example: "memberOf"

    LDAPConnectionTest:
      type: object
      required:
        - host
        - base_dn
        - bind_dn
        - bind_password
      properties:
        host:
          type: string
          description: LDAP server hostname or IP
          example: "ldap.company.com"
        port:
          type: integer
          description: LDAP server port
          default: 389
          example: 389
        base_dn:
          type: string
          description: Base Distinguished Name
          example: "dc=company,dc=com"
        bind_dn:
          type: string
          description: Bind Distinguished Name
          example: "cn=gotrs-service,ou=Service Accounts,dc=company,dc=com"
        bind_password:
          type: string
          format: password
          description: Bind password

    LDAPConfigResponse:
      type: object
      properties:
        host:
          type: string
          example: "ldap.company.com"
        port:
          type: integer
          example: 389
        base_dn:
          type: string
          example: "dc=company,dc=com"
        bind_dn:
          type: string
          example: "cn=gotrs-service,ou=Service Accounts,dc=company,dc=com"
        user_search_base:
          type: string
          example: "ou=Users,dc=company,dc=com"
        user_filter:
          type: string
          example: "(&(objectClass=inetOrgPerson)(uid={username}))"
        group_search_base:
          type: string
          example: "ou=Groups,dc=company,dc=com"
        group_filter:
          type: string
          example: "(objectClass=groupOfNames)"
        use_tls:
          type: boolean
          example: false
        start_tls:
          type: boolean
          example: false
        auto_create_users:
          type: boolean
          example: true
        auto_update_users:
          type: boolean
          example: true
        auto_create_groups:
          type: boolean
          example: true
        sync_interval:
          type: string
          example: "1h"
        default_role:
          type: string
          example: "user"
        admin_groups:
          type: array
          items:
            type: string
          example: ["Domain Admins", "IT Team"]
        user_groups:
          type: array
          items:
            type: string
          example: ["Users"]
        attribute_map:
          $ref: '#/components/schemas/LDAPAttributeMap'

    LDAPUser:
      type: object
      properties:
        dn:
          type: string
          description: Distinguished Name
          example: "cn=John Doe,ou=Users,dc=company,dc=com"
        username:
          type: string
          description: Username
          example: "jdoe"
        email:
          type: string
          format: email
          description: Email address
          example: "john.doe@company.com"
        first_name:
          type: string
          description: First name
          example: "John"
        last_name:
          type: string
          description: Last name
          example: "Doe"
        display_name:
          type: string
          description: Display name
          example: "John Doe"
        phone:
          type: string
          description: Phone number
          example: "+1-555-0123"
        department:
          type: string
          description: Department
          example: "IT"
        title:
          type: string
          description: Job title
          example: "Senior Developer"
        manager:
          type: string
          description: Manager DN
          example: "cn=Jane Manager,ou=Users,dc=company,dc=com"
        groups:
          type: array
          items:
            type: string
          description: Group memberships
          example: ["IT Team", "Developers", "Users"]
        attributes:
          type: object
          additionalProperties: true
          description: Raw LDAP attributes
        object_guid:
          type: string
          description: Object GUID (AD specific)
        object_sid:
          type: string
          description: Object SID (AD specific)
        last_login:
          type: string
          format: date-time
          description: Last login time
        is_active:
          type: boolean
          description: Account active status
          example: true

    LDAPGroup:
      type: object
      properties:
        dn:
          type: string
          description: Distinguished Name
          example: "cn=IT Team,ou=Groups,dc=company,dc=com"
        name:
          type: string
          description: Group name
          example: "IT Team"
        description:
          type: string
          description: Group description
          example: "Information Technology staff"
        members:
          type: array
          items:
            type: string
          description: Group member DNs
          example: ["cn=John Doe,ou=Users,dc=company,dc=com"]
        object_guid:
          type: string
          description: Object GUID (AD specific)
        object_sid:
          type: string
          description: Object SID (AD specific)

    LDAPSyncResult:
      type: object
      properties:
        users_found:
          type: integer
          description: Number of users found in LDAP
          example: 150
        users_created:
          type: integer
          description: Number of users created
          example: 5
        users_updated:
          type: integer
          description: Number of users updated
          example: 12
        users_disabled:
          type: integer
          description: Number of users disabled
          example: 2
        groups_found:
          type: integer
          description: Number of groups found in LDAP
          example: 25
        groups_created:
          type: integer
          description: Number of groups created
          example: 1
        groups_updated:
          type: integer
          description: Number of groups updated
          example: 3
        errors:
          type: array
          items:
            type: string
          description: Error messages during sync
          example: []
        start_time:
          type: string
          format: date-time
          description: Sync start time
          example: "2025-08-17T10:00:00Z"
        end_time:
          type: string
          format: date-time
          description: Sync end time
          example: "2025-08-17T10:02:15Z"
        duration:
          type: integer
          format: int64
          description: Sync duration in nanoseconds
          example: 135000000000
        dry_run:
          type: boolean
          description: Whether this was a dry run
          example: false

    LDAPSyncStatus:
      type: object
      properties:
        configured:
          type: boolean
          description: Whether LDAP is configured
          example: true
        connected:
          type: boolean
          description: Whether connection is active
          example: true
        auto_sync:
          type: boolean
          description: Whether auto-sync is enabled
          example: true
        last_sync:
          type: string
          format: date-time
          nullable: true
          description: Last sync timestamp
          example: "2025-08-17T10:00:00Z"
        next_sync:
          type: string
          format: date-time
          nullable: true
          description: Next scheduled sync
          example: "2025-08-17T11:00:00Z"
        sync_interval:
          type: string
          description: Sync interval
          example: "1h"
        total_users:
          type: integer
          description: Total users synchronized
          example: 150
        total_groups:
          type: integer
          description: Total groups synchronized
          example: 25

    LDAPAuthLog:
      type: object
      properties:
        username:
          type: string
          description: Username that attempted authentication
          example: "jdoe"
        success:
          type: boolean
          description: Whether authentication was successful
          example: true
        error:
          type: string
          nullable: true
          description: Error message if authentication failed
          example: null
        ip_address:
          type: string
          nullable: true
          description: Client IP address
          example: "192.168.1.100"
        user_agent:
          type: string
          nullable: true
          description: Client user agent
          example: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
        timestamp:
          type: string
          format: date-time
          description: Authentication timestamp
          example: "2025-08-17T10:30:00Z"

    # Response Models
    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            token:
              type: string
              description: JWT token
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            expires_at:
              type: string
              format: date-time
              description: Token expiration time
              example: "2025-08-18T10:30:00Z"
        message:
          type: string
          example: "Login successful"

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation completed successfully"

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          description: Error message
          example: "Invalid credentials provided"
        code:
          type: string
          nullable: true
          description: Error code for programmatic handling
          example: "AUTH_INVALID_CREDENTIALS"

    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
          example: 1
        per_page:
          type: integer
          description: Items per page
          example: 20
        total:
          type: integer
          description: Total number of items
          example: 157
        total_pages:
          type: integer
          description: Total number of pages
          example: 8
        has_next:
          type: boolean
          description: Whether there is a next page
          example: true
        has_prev:
          type: boolean
          description: Whether there is a previous page
          example: false

tags:
  - name: Authentication
    description: User authentication and session management
  - name: Dashboard
    description: Dashboard statistics and overview data
  - name: Tickets
    description: Ticket management and operations
  - name: Queues
    description: Queue management and configuration
  - name: Users
    description: User management and profiles
  - name: LDAP Integration
    description: LDAP/Active Directory integration and synchronization
  - name: Admin
    description: Administrative functions and system configuration
