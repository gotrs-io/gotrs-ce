services:
  playwright:
    image: mcr.microsoft.com/playwright:v1.55.1-jammy
    container_name: gotrs-playwright
    user: "${HOST_UID:-1000}:${HOST_GID:-1000}"
    networks:
      - gotrs-network
    volumes:
      - ./:/workspace
      - gotrs_node_modules:/workspace/node_modules
      - gotrs_cache:/workspace/.cache
    working_dir: /workspace
    command: tail -f /dev/null  # Keep container running
    environment:
      - PLAYWRIGHT_BROWSERS_PATH=/ms-playwright
      - NPM_CONFIG_CACHE=/workspace/.cache/npm
      - XDG_CACHE_HOME=/workspace/.cache/xdg
      - NODE_ENV=test

networks:
  gotrs-network:
    external: true
    name: gotrs-ce_gotrs-network

volumes:
  gotrs_node_modules:
  gotrs_cache: