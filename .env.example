# GOTRS Environment Configuration Example
# Copy this file to .env and update with your values
#
# SECURITY WARNING: 
# - NEVER commit .env files to version control
# - ALWAYS change all default passwords before deployment
# - Use strong, unique passwords for production
# - Store production secrets in a secure vault (e.g., HashiCorp Vault, AWS Secrets Manager)

# ============================================
# Application
# ============================================

# Environment: development, staging, production
APP_ENV=development

# Application port
APP_PORT=8080

# Application URL (used for emails, webhooks, etc.)
APP_URL=http://localhost:8080

# Secret key for JWT signing (REQUIRED - generate with: openssl rand -hex 32)
# NEVER use default values in production!
JWT_SECRET=CHANGE_THIS_SECRET_KEY_BEFORE_USE

# JWT token expiration times
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# ============================================
# Database
# ============================================

# PostgreSQL connection
DB_HOST=localhost
DB_PORT=5432
DB_NAME=gotrs
DB_USER=gotrs_user
DB_PASSWORD=gotrs_password
DB_SSL_MODE=disable

# Connection pool settings
DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10
DB_CONNECTION_MAX_LIFETIME=30m

# Database URL (alternative to individual settings)
# DATABASE_URL=postgres://gotrs_user:gotrs_password@localhost:5432/gotrs?sslmode=disable

# ============================================
# Valkey Cache
# ============================================

VALKEY_HOST=localhost
VALKEY_PORT=6380
VALKEY_PASSWORD=
VALKEY_DB=0

# Valkey URL (alternative to individual settings)
# VALKEY_URL=valkey://localhost:6380/0

# ============================================
# Email Configuration
# ============================================

# SMTP settings for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@gotrs.io
SMTP_FROM_NAME=GOTRS Support
SMTP_TLS=true

# IMAP settings for receiving emails
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USER=your-email@gmail.com
IMAP_PASSWORD=your-app-password
IMAP_SSL=true
IMAP_FOLDER=INBOX

# Email processing
EMAIL_FETCH_INTERVAL=5m
EMAIL_MAX_SIZE=10MB

# ============================================
# Storage
# ============================================

# Storage backend: local, s3
STORAGE_BACKEND=local

# Local storage
STORAGE_LOCAL_PATH=./storage

# S3 storage (if STORAGE_BACKEND=s3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET=gotrs-attachments
S3_ENDPOINT=

# File upload limits
MAX_UPLOAD_SIZE=10MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,png,jpg,jpeg,gif,zip

# ============================================
# Security
# ============================================

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# Session settings
SESSION_SECRET=your-session-secret-here
SESSION_MAX_AGE=86400
SESSION_SECURE=false
SESSION_HTTP_ONLY=true

# ============================================
# Logging
# ============================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Log output: stdout, file
LOG_OUTPUT=stdout

# Log file path (if LOG_OUTPUT includes file)
LOG_FILE_PATH=./logs/gotrs.log

# ============================================
# Monitoring
# ============================================

# Metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# OpenTelemetry
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=gotrs

# ============================================
# Demo Mode
# ============================================

# Enable demo mode features (shows demo credentials on login page)
# WARNING: Only enable in development/demo environments!
DEMO_MODE=false
DEMO_RESET_SCHEDULE="0 2 * * *"
DEMO_DATA_FILE=./demo-data/sample.json

# Demo credentials - ONLY used when DEMO_MODE=true
# These should NEVER be used in production!
DEMO_ADMIN_EMAIL=demo-admin@example.com
DEMO_ADMIN_PASSWORD=ChangeThisPassword123!
DEMO_AGENT_EMAIL=demo-agent@example.com
DEMO_AGENT_PASSWORD=ChangeThisPassword456!
DEMO_CUSTOMER_EMAIL=demo-customer@example.com
DEMO_CUSTOMER_PASSWORD=ChangeThisPassword789!

# ============================================
# Feature Flags
# ============================================

FEATURE_AI_SUGGESTIONS=false
FEATURE_ADVANCED_WORKFLOWS=false
FEATURE_MULTI_LANGUAGE=false
FEATURE_WEBHOOKS=true
FEATURE_API_V2=false

# ============================================
# Search Engine (Zinc)
# ============================================

# Zinc admin credentials (required)
ZINC_USER=zinc_admin
ZINC_PASSWORD=ChangeThisZincPassword123!

# ============================================
# LDAP/Active Directory Integration
# ============================================

# LDAP connection settings
LDAP_HOST=openldap
LDAP_PORT=389
LDAP_BASE_DN=dc=gotrs,dc=local
LDAP_BIND_DN=cn=readonly,dc=gotrs,dc=local
LDAP_BIND_PASSWORD=readonly123

# LDAP authentication settings
LDAP_USER_SEARCH_BASE=ou=Users,dc=gotrs,dc=local
LDAP_USER_FILTER=(&(objectClass=inetOrgPerson)(uid={username}))
LDAP_GROUP_SEARCH_BASE=ou=Groups,dc=gotrs,dc=local
LDAP_GROUP_FILTER=(objectClass=groupOfNames)

# LDAP attribute mapping
LDAP_ATTR_USERNAME=uid
LDAP_ATTR_EMAIL=mail
LDAP_ATTR_FIRST_NAME=givenName
LDAP_ATTR_LAST_NAME=sn
LDAP_ATTR_DISPLAY_NAME=displayName
LDAP_ATTR_PHONE=telephoneNumber
LDAP_ATTR_DEPARTMENT=departmentNumber
LDAP_ATTR_TITLE=title
LDAP_ATTR_MANAGER=manager
LDAP_ATTR_GROUPS=memberOf

# LDAP security settings
LDAP_USE_TLS=false
LDAP_START_TLS=false
LDAP_INSECURE_SKIP_VERIFY=true

# LDAP synchronization
LDAP_AUTO_CREATE_USERS=true
LDAP_AUTO_UPDATE_USERS=true
LDAP_AUTO_CREATE_GROUPS=true
LDAP_SYNC_INTERVAL=1h

# Role mapping based on LDAP groups
LDAP_ADMIN_GROUPS=Domain Admins,IT Team
LDAP_AGENT_GROUPS=Agents,Support Team,Managers
LDAP_USER_GROUPS=Users

# Test LDAP server credentials (for development only)
LDAP_ADMIN_PASSWORD=admin123
LDAP_CONFIG_PASSWORD=config123
LDAP_READONLY_PASSWORD=readonly123

# ============================================
# External Services
# ============================================

# OpenAI (for AI features)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo

# Slack integration
SLACK_APP_TOKEN=
SLACK_BOT_TOKEN=
SLACK_SIGNING_SECRET=

# GitHub integration
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
GITHUB_WEBHOOK_SECRET=

# ============================================
# Development
# ============================================

# Development tools
DEV_HOT_RELOAD=true
DEV_VERBOSE_ERRORS=true
DEV_SQL_DEBUG=false

# Frontend development server
VITE_API_URL=http://localhost:8080/api
VITE_WS_URL=ws://localhost:8080/ws